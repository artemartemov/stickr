var N=Object.defineProperty,j=Object.defineProperties,Z=Object.getOwnPropertyDescriptor,W=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertyNames,L=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var F=(t,e,n)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||(e={}))z.call(e,n)&&F(t,n,e[n]);if(L)for(var n of L(e))G.call(e,n)&&F(t,n,e[n]);return t},v=(t,e)=>j(t,W(e));var O=(t,e)=>()=>(t&&(e=t(t=0)),e);var K=(t,e)=>{for(var n in e)N(t,n,{get:e[n],enumerable:!0})},J=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of X(e))!z.call(t,a)&&a!==n&&N(t,a,{get:()=>e[a],enumerable:!(o=Z(e,a))||o.enumerable});return t};var q=t=>J(N({},"__esModule",{value:!0}),t);function M(t,e){let n=`${B}`;return B+=1,I[n]={handler:e,name:t},function(){delete I[n]}}function D(t,e){let n=!1;for(let o in I)I[o].name===t&&(I[o].handler.apply(null,e),n=!0);if(n===!1)throw new Error(`No event handler with name \`${t}\``)}var I,B,E,U=O(()=>{I={},B=0;E=typeof window=="undefined"?function(t,...e){figma.ui.postMessage([t,...e])}:function(t,...e){window.parent.postMessage({pluginMessage:[t,...e]},"*")};typeof window=="undefined"?figma.ui.onmessage=function(t){if(!Array.isArray(t))return;let[e,...n]=t;typeof e=="string"&&D(e,n)}:window.onmessage=function(t){if(typeof t.data.pluginMessage=="undefined")return;let e=t.data.pluginMessage;if(!Array.isArray(e))return;let[n,...o]=t.data.pluginMessage;typeof n=="string"&&D(n,o)}});function R(t,e){if(typeof __html__=="undefined")throw new Error("No UI defined");let n=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof e=="undefined"?{}:e)};${__html__}</script>`;figma.showUI(n,v(V({},t),{themeColors:typeof t.themeColors=="undefined"?!0:t.themeColors}))}var _=O(()=>{});var H=O(()=>{U();_()});var P={};K(P,{default:()=>Q});function Q(){R({height:720,width:480}),M("GENERATE_STICKER_SHEET",async n=>{try{console.log("Generating sticker sheet...",n),await Y(n),figma.notify("Sticker sheet generated successfully!")}catch(o){console.error("Error:",o),figma.notify("Error generating sticker sheet")}});function t(){let n=[],o=figma.currentPage.selection;return o.length>0&&(n=o.filter(a=>a.type==="COMPONENT_SET")),n.map(a=>{let r={},i=a.componentPropertyDefinitions||{};Object.keys(i).forEach(f=>{let c=f.split("#")[0],p=i[f];r[c]||(r[c]={type:p.type,values:[]}),p.type==="VARIANT"&&p.variantOptions?r[c].values=p.variantOptions:p.type==="BOOLEAN"&&(r[c].values=["true","false"])});let m=Object.keys(r).sort((f,c)=>{let p={VARIANT:0,BOOLEAN:1,INSTANCE_SWAP:2,TEXT:3},C=r[f].type,y=r[c].type,S=p[C]!==void 0?p[C]:999,A=p[y]!==void 0?p[y]:999;return S!==A?S-A:f.localeCompare(c)});return{id:a.id,name:a.name,properties:r,propertyOrder:m,variantCount:a.children.length}})}let e=t();E("INIT_DATA",e),figma.on("selectionchange",()=>{let n=t();E("INIT_DATA",n)})}async function Y(t){let{selectedCombinations:e,includeLightDark:n}=t;if(e.length===0){figma.notify("No combinations selected");return}let o=figma.createFrame();o.name="Sticker Sheet",o.layoutMode="VERTICAL",o.primaryAxisSizingMode="AUTO",o.counterAxisSizingMode="AUTO",o.itemSpacing=0,o.paddingTop=32,o.paddingBottom=32,o.paddingLeft=32,o.paddingRight=32,o.fills=[{type:"SOLID",color:{r:.98,g:.98,b:.98}}],o.cornerRadius=8;let a={};for(let r of e)a[r.componentSetId]||(a[r.componentSetId]=[]),a[r.componentSetId].push(r);for(let r in a){let i=a[r],m=figma.getNodeById(r);if(!m)continue;let f=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Semi Bold"}),f.fontName={family:"Inter",style:"Semi Bold"},f.fontSize=18,f.characters=m.name,f.fills=[{type:"SOLID",color:{r:.2,g:.2,b:.2}}],o.appendChild(f);let c=figma.createFrame();c.resize(1,16),c.fills=[],o.appendChild(c);let p=figma.createFrame();p.name="Modes Container",p.layoutMode="HORIZONTAL",p.primaryAxisSizingMode="AUTO",p.counterAxisSizingMode="AUTO",p.itemSpacing=24,p.fills=[];let C=await $(m,i,!1);if(p.appendChild(C),n){let S=await $(m,i,!0);p.appendChild(S)}o.appendChild(p);let y=figma.createFrame();y.resize(1,24),y.fills=[],o.appendChild(y)}figma.currentPage.selection=[o],figma.viewport.scrollAndZoomIntoView([o])}function ee(t){if(t.length===0)return[];let e={},n={},o=t[0];for(let r of t)for(let i in r.properties)e[i]||(e[i]=new Set),e[i].add(r.properties[i]);let a=[];for(let r in e)if(e[r].size>1){let i=Array.from(e[r]),m="OTHER";i.every(f=>String(f).toLowerCase()==="true"||String(f).toLowerCase()==="false")?m="BOOLEAN":m="VARIANT",a.push({name:r,values:i,type:m})}return a.sort((r,i)=>r.type==="VARIANT"&&i.type!=="VARIANT"?-1:r.type!=="VARIANT"&&i.type==="VARIANT"?1:r.name.localeCompare(i.name)),a}async function b(t,e){let o=t.children[0].createInstance(),a=t.componentPropertyDefinitions,r={};for(let i in a){let m=i.split("#")[0];r[m]=i}for(let i in e){let m=e[i],f=r[i];if(f)try{let c=m;String(m).toLowerCase()==="true"?c=!0:String(m).toLowerCase()==="false"&&(c=!1),o.setProperties({[f]:c}),console.log("\u2713 Set property:",i,"=",c)}catch(c){console.log("\u2717 Could not set property:",i,"=",m,"Error:",c)}else console.log("\u2717 No matching key found for property:",i,"Available keys:",Object.keys(r))}return o}async function $(t,e,n){let o=figma.createFrame();o.name=n?"Dark Mode":"Light Mode",o.layoutMode="VERTICAL",o.primaryAxisSizingMode="AUTO",o.counterAxisSizingMode="AUTO",o.itemSpacing=16,o.paddingTop=24,o.paddingBottom=24,o.paddingLeft=24,o.paddingRight=24,o.cornerRadius=8,o.fills=n?[{type:"SOLID",color:{r:.18,g:.18,b:.18}}]:[{type:"SOLID",color:{r:1,g:1,b:1}}];let a=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Medium"}),a.fontName={family:"Inter",style:"Medium"},a.fontSize=14,a.characters=n?"Dark Mode":"Light Mode",a.fills=n?[{type:"SOLID",color:{r:1,g:1,b:1}}]:[{type:"SOLID",color:{r:.2,g:.2,b:.2}}],o.appendChild(a);let r=await oe(t,e,n);return o.appendChild(r),o}async function oe(t,e,n){let o=figma.createFrame();if(o.name="Table",o.layoutMode="VERTICAL",o.primaryAxisSizingMode="AUTO",o.counterAxisSizingMode="AUTO",o.itemSpacing=8,o.fills=[],e.length===0)return o;console.log("=== createSimpleTable DEBUG ==="),console.log("Number of combinations:",e.length),console.log("First combination:",e[0]),console.log("All combinations:",e.map(s=>s.properties));let a=await b(t,e[0].properties),r=a.width,i=a.height;a.remove(),await figma.loadFontAsync({family:"Inter",style:"Semi Bold"}),await figma.loadFontAsync({family:"Inter",style:"Regular"});let m=ee(e);if(console.log("Varying properties found:",m),console.log("Property types:",m.map(s=>({name:s.name,type:s.type,values:s.values}))),m.length===0){let s=figma.createFrame();s.layoutMode="HORIZONTAL",s.itemSpacing=12,s.fills=[];for(let d of e){let l=await b(t,d.properties);s.appendChild(l)}return o.appendChild(s),o}let f=m[0],c=m.slice(1);console.log("Row property:",f),console.log("Column properties:",c);let p=[],C=new Set;for(let s of e){let d=String(s.properties[f.name]);C.has(d)||(C.add(d),p.push(d))}let y=[],S=new Set;for(let s of e){let d={};for(let g of c)d[g.name]=s.properties[g.name];let l=JSON.stringify(d);S.has(l)||(S.add(l),y.push(d))}y.sort((s,d)=>{for(let l of c){let g=String(s[l.name]),h=String(d[l.name]);if(g!==h)return g.localeCompare(h)}return 0}),console.log("Column combinations:",y),console.log("Number of columns:",y.length);let A=figma.createFrame();A.name="Header Row",A.layoutMode="HORIZONTAL",A.itemSpacing=12,A.fills=[],A.paddingBottom=8;let w=figma.createFrame();w.resize(100,1),w.fills=[],A.appendChild(w);for(let s=0;s<y.length;s++){let d=y[s],l=figma.createFrame();l.layoutMode="VERTICAL",l.primaryAxisSizingMode="FIXED",l.counterAxisSizingMode="AUTO",l.primaryAxisAlignItems="CENTER",l.fills=[];let g=figma.createText();g.fontName={family:"Inter",style:"Semi Bold"},g.fontSize=10,g.textAlignHorizontal="CENTER";let h=[];if(c.length>0)for(let x of c){let u=String(d[x.name]);h.push(`${x.name}: (${s+1}) ${u}`)}else h.push(`(${s+1})`);g.characters=h.join(`
`),g.fills=n?[{type:"SOLID",color:{r:.6,g:.6,b:.6}}]:[{type:"SOLID",color:{r:.5,g:.5,b:.5}}],l.appendChild(g),l.resize(Math.max(r,g.width+8),g.height+8),console.log(`Header ${s}: "${g.characters}" - size: ${l.width}x${l.height}`),A.appendChild(l)}o.appendChild(A);for(let s of p){let d=figma.createFrame();d.name=`Row: ${s}`,d.layoutMode="HORIZONTAL",d.itemSpacing=12,d.fills=[];let l=figma.createFrame();l.resize(100,i),l.layoutMode="VERTICAL",l.primaryAxisAlignItems="CENTER",l.counterAxisAlignItems="CENTER",l.fills=[];let g=figma.createText();g.fontName={family:"Inter",style:"Regular"},g.fontSize=11,g.characters=`${f.name}:
${s}`,g.textAlignHorizontal="CENTER",g.fills=n?[{type:"SOLID",color:{r:.8,g:.8,b:.8}}]:[{type:"SOLID",color:{r:.3,g:.3,b:.3}}],l.appendChild(g),d.appendChild(l);for(let h of y){let x=e.find(u=>{if(String(u.properties[f.name])!==s)return!1;for(let T of c)if(String(u.properties[T.name])!==String(h[T.name]))return!1;return!0});if(x){let u=figma.createFrame();u.resize(r,i),u.layoutMode="VERTICAL",u.primaryAxisAlignItems="CENTER",u.counterAxisAlignItems="CENTER",u.fills=[];let T=await b(t,x.properties);u.appendChild(T),d.appendChild(u)}else{let u=figma.createFrame();u.resize(r,i),u.fills=[],d.appendChild(u)}}o.appendChild(d)}return o}var k=O(()=>{"use strict";H()});var te={"src/main.ts--default":(k(),q(P)).default},ne="src/main.ts--default";te[ne]();
